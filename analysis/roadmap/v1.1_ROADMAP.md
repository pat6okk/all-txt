# Roadmap v1.1 - PrÃ³ximas 4-6 Semanas

**Objetivo:** Pulir v1.0, optimizar rendimiento, fijar bugs crÃ­ticos.

**Lema:** "Estable, rÃ¡pido y confiable"

---

## ğŸš¨ Prioridad CRÃTICA

### 1. US-8.3: AuditorÃ­a de Memory Leaks

**Â¿Por quÃ©?** Los usuarios reportan lentitud despuÃ©s de horas de uso.

**Scope:**
- AuditorÃ­a manual de code (2-4 horas)
- Testing con Chrome DevTools (2-4 horas)
- Implementar mitigaciones (4-8 horas)

**Criterios de AceptaciÃ³n:**
- âœ… Sin memory leaks detectados en heap snapshots
- âœ… Test automatizado de memory leak en suite
- âœ… DocumentaciÃ³n en README de "Known Limitations"

**Timeline:** SEMANA 1

**Owner:** Lead dev (crÃ­tico)

---

## ğŸ”¥ Prioridad ALTA

### 2. US-1.1 + US-1.2 + US-2.5: Strict Parser, Block Content y Tarjeta Expandible

**Â¿Por quÃ©?** El cambio de paradigma ya consolidado exige mantener una sola verdad: detecciÃ³n estricta + bloque orgÃ¡nico por indentaciÃ³n + visualizaciÃ³n expandible en panel.

**Scope:**
- **US-1.1:** DetecciÃ³n estricta al inicio de lÃ­nea (sin prefijos legacy).
- **US-1.2:** Captura de bloque por indentaciÃ³n (sin delimitadores artificiales).
- **US-2.5:** Render expandible/colapsable de contenido y subtareas en panel.
- Cobertura de tests de parser y visualizaciÃ³n asociada.

**Criterios de AceptaciÃ³n:**
- âœ… Parser detecta keywords solo al inicio (o con indentaciÃ³n).
- âœ… Parser cierra bloque por dedent, header hermano/padre o EOF.
- âœ… Panel muestra flecha de expandir cuando existe `blockContent` o `subtasks`.
- âœ… Tests cubren casos de bloque orgÃ¡nico, anidaciÃ³n y lÃ­mites.

**Timeline:** SEMANA 1-3

**Owner:** Backend lead + Frontend dev

---

### 3. US-1.5: Context Menu - Quick Conversion

**Â¿Por quÃ©?** UX crÃ­tica para convertir notas libres al formato canÃ³nico sin fricciÃ³n.

**Scope:**
- MenÃº contextual en editor.
- TransformaciÃ³n de selecciÃ³n a `KEYWORD + bloque indentado`.
- SubmenÃº dinÃ¡mico con keywords de inicio (workflows).
- Testing de casos borde (selecciÃ³n multilÃ­nea y lÃ­nea actual).

**Criterios de AceptaciÃ³n:**
- âœ… Click derecho muestra `Convert to flow block...` cuando hay texto vÃ¡lido.
- âœ… SubmenÃº lista keywords dinÃ¡micamente desde configuraciÃ³n.
- âœ… TransformaciÃ³n inserta keyword e indenta el bloque sin delimitador.
- âœ… Mantiene formato interno sin cambios destructivos.

**Timeline:** SEMANA 2-3

**Owner:** Frontend dev

---

### 4. PRJ-006: NormalizaciÃ³n de actualizaciÃ³n reactiva (sin slider)

**Â¿Por quÃ©?** `refreshInterval` no existe en implementaciÃ³n activa; mantenerlo en roadmap/documentaciÃ³n genera contradicciÃ³n operativa.

**Scope:**
- Retirar referencias activas a `refreshInterval` y "slider de refresh".
- Documentar modelo oficial reactivo por eventos de vault.
- Alinear guÃ­a de performance y arquitectura tÃ©cnica.

**Criterios de AceptaciÃ³n:**
- âœ… Sin referencias activas a `refreshInterval` como feature vigente.
- âœ… Arquitectura y guÃ­a reflejan actualizaciÃ³n por eventos.
- âœ… DiagnÃ³stico PRJ-006 marcado como resuelto.

**Timeline:** SEMANA 2

**Owner:** Backend + Docs

---

### 5. US-3.2: Global Return Logic

**Â¿Por quÃ©?** Workflows no regresan correctamente (requiere refinamiento).

**Scope:**
- Analizar casos de uso (2 horas)
- Implementar lÃ³gica de retorno global (3-4 horas)
- AÃ±adir tests unitarios (2 horas)

**Criterios de AceptaciÃ³n:**
- âœ… Implementada lÃ³gica de "retorno global" del primer flujo
- âœ… Tests validam retorno correcto
- âœ… Documentar en ARCHITECTURE.md

**Timeline:** SEMANA 2-3

**Owner:** Backend dev

---

### 6. US-2.4: Highlighter Performance Validation

**Â¿Por quÃ©?** Performance no validado en documentos grandes.

**Scope:**
- Benchmark con documentos de 5000+ lÃ­neas (2 horas)
- Profile con DevTools (2 horas)
- Optimizar si es necesario (4-8 horas)

**Criterios de AceptaciÃ³n:**
- âœ… Documentos 5000+ lÃ­neas: <100ms per change
- âœ… DevTools profile sin hotspots obviamente mejorables
- âœ… O documentar como "conocida limitaciÃ³n"

**Timeline:** SEMANA 3

**Owner:** Backend + perf engineer

---

## ğŸ“‹ Prioridad MEDIA

### 7. DocumentaciÃ³n TÃ©cnica

**Scope:**
- Completar `ARCHITECTURE.md` (en progress)
- Crear `PARSER_IMPLEMENTATION.md` (2-3 horas)
- Crear `MEMORY_AUDIT.md` con plan (2 horas)

**Criterios de AceptaciÃ³n:**
- âœ… Nuevos devs pueden entender arquitectura en < 30 min
- âœ… Documentado cÃ³mo extender parser
- âœ… Plan de auditorÃ­a memory claramente definido

**Timeline:** SEMANA 1-2 (paralelo a features)

**Owner:** Tech lead

---

### 8. Testing Suite Expansion

**Scope:**
- AÃ±adir tests para US-3.2 (workflows) (2 horas)
- AÃ±adir test de memory leak (1-2 horas)
- Aumentar cobertura a >70% (3-4 horas)

**Criterios de AceptaciÃ³n:**
- âœ… Cobertura >70%
- âœ… CI/CD ejecuta tests en cada push
- âœ… Test de memory leak pasa

**Timeline:** SEMANA 2-3

**Owner:** QA / Backend dev

---

## ğŸ“ Prioridad BAJA (Post-v1.1)

### Consideraciones para v1.2

- US-2.2: AgrupaciÃ³n visual por estado
- US-4.3: Umbrales configurables de vencimiento
- US-8.1: Carga progresiva para bÃ³vedas grandes
- ExportaciÃ³n (US-9.2) - validar demanda

---

## Sprint Schedule

| Semana | Focus | Owner |
|--------|-------|-------|
| 1 | Memory audit + Strict Parser (US-1.1) | Backend lead |
| 2 | Block organico (US-1.2) + Context Menu (US-1.5) + Tarjeta panel (US-2.5) | Backend + Frontend |
| 3 | Global return logic + hardening de rendimiento | Backend + Frontend |
| 4-6 | Performance testing + refinement | QA + all |

---

## MÃ©tricas de Ã‰xito

- âœ… 0 memory leaks detectados
- âœ… Highlighter accuracy > 99%
- âœ… Performance: archivo 5000 lÃ­neas < 100ms
- âœ… Testing cobertura > 70%
- âœ… 0 critical/blocker bugs abiertos
- âœ… DocumentaciÃ³n completa (ARCHITECTURE + parser + memory audit)

---

## Unknowns / Risks

| Risk | Mitigation |
|------|-----------|
| Memory leak difÃ­cil de detectar | Usar DevTools profiler desde inicio |
| Highlighter regex complejo | Considerar alternativa (simplificar) |
| Workflows jerÃ¡rquicos confusos | Documentar bien el design |
| Testing insuficiente | Aumentar cobertura gradualmente |

---

## Post-v1.1 (v1.2 Vision)

```
v1.2 Features (8-10 semanas despuÃ©s v1.1):
â”œâ”€ Carga progresiva (4 fases)
â”œâ”€ AgrupaciÃ³n visual por estado
â”œâ”€ Umbrales configurables
â”œâ”€ Filtros avanzados
â”œâ”€ Modal de ediciÃ³n inline de fechas
â”œâ”€ ExportaciÃ³n a CSV/JSON (bÃ¡sico)
â””â”€ DocumentaciÃ³n completa

v2.0 Vision (3+ meses despuÃ©s v1.2):
â”œâ”€ API MCP para IA
â”œâ”€ SincronizaciÃ³n profunda con otros plugins
â”œâ”€ Dash board / analytics
â””â”€ Apps mÃ³vil nativa (futuro lejano)
```

---

**PrÃ³xima revisiÃ³n:** Fin de v1.1 (6 semanas)
